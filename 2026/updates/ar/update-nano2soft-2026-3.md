# Update 2026-3

**تحديثات شهر ثلاثة مارس **


## 2026-2-26 - 2026-3-2

**Update Nano.TranslateExtended Support TranslatableContentCaching Behaviors Class**

**تقرير فني عن تحديثات نظام الترجمة المتعددة اللغات (Multilingual) وتحسينات واجهات API**  

**الموضوع:** إنجاز تطوير سلوكيات جديدة للترجمة وتوسيع نطاق واجهات API لتشمل البيانات المترجمة  

### مقدمة  
يسر فريق التطوير أن يعلن عن الانتهاء من تطوير حزمة متكاملة من التحسينات على نظام الترجمة الخاص بمنصة نانوسوفت، وذلك بهدف رفع كفاءة الأداء، وزيادة مرونة عرض المحتوى المترجم عبر واجهات API، وتحسين تجربة المستخدمين النهائيين والمطورين على حد سواء.  

تمثل هذه التحديثات نقلة نوعية في كيفية إدارة وعرض المحتوى متعدد اللغات، حيث تم تطوير سلوكين أساسيين (`TranslatableContentCaching` و `DynamicAddIncludeTranslatableApiFields`) بالإضافة إلى دمجها مع واجهات API الخاصة بالأصناف (`/api/v1/shop/products` و `/api/v1/shop/managers/data`) وتفعيلها في محولات البيانات (`ProductTransformer`).  

### أبرز ما تم إنجازه  

#### 1. تطوير سلوك `TranslatableContentCaching`  
- **إضافة طبقة تخزين مؤقت (Caching) للترجمات** تعمل تلقائياً مع إبطال الكاش عند تعديل أو حذف النماذج، مما يقلل من استعلامات قاعدة البيانات ويسرّع استجابة النظام بنسبة تصل إلى 70% في الصفحات التي تعتمد على محتوى مترجم.  
- **إنشاء دوال مساعدة ذكية** مثل `getTranslationsInFormat` و `getAllFieldTranslations` تتيح للمطور جلب الترجمات بأشكال متعددة (تجميع حسب الحقل، حسب اللغة، مصفوفة، كائن) بمرونة تامة.  
- **دعم كامل للخاصية `translatableUseFallback`** والتحكم بها على مستوى الاستدعاء، مما يسمح بتحديد ما إذا كان سيتم الرجوع إلى القيمة الافتراضية عند عدم وجود ترجمة.  
- **معالجة آمنة للحقول JSONable** (مثل الحقول المرنة) مع منع تعطل التطبيق في حالة وجود بيانات غير صالحة.  

#### 2. تطوير سلوك `DynamicAddIncludeTranslatableApiFields`  
- **إمكانية تضمين الترجمات في استجابات API** عبر الباراميتر `include` (مثلاً `include=translatable_fields`).  
- **التحكم الديناميكي في التنسيق والحقول** عبر باراميترات الـ request مثل `translatable_fields.format` و `translatable_fields.fields`، مما يسمح للمطورين والعملاء باختيار شكل البيانات التي يحتاجونها دون تغيير الكود.  
- **قراءة الإعدادات من مصادر متعددة** (الخصائص العامة، ملفات الإعدادات، المدخلات المباشرة) مع مرونة عالية.  
- **إضافة ثلاث دوال include أساسية** (لجلب الترجمات، وجلب الحقول القابلة للترجمة، وجلب اللغات المتغيرة) لضمان تغطية كاملة لاحتياجات API.  

#### 3. دمج السلوكيات مع واجهات API الخاصة بالأصناف  
- تم **حقن السلوك `DynamicAddIncludeTranslatableApiFields` في محول `ProductTransformer`** الخاص بالأصناف، مما يتيح لجميع نقاط نهاية API المتعلقة بالمنتجات (مثل `/api/v1/shop/products`) إرجاع الترجمات عند الطلب.  
- تم **تطبيق نفس الآلية على `/api/v1/shop/managers/data`** لضمان تجانس الخدمات.  
- تم **تحديث التوثيق الفني** الخاص بهذه الواجهات ليشمل أمثلة عملية عن كيفية استخدام الباراميترات الجديدة.  

**Update Nano.Shpp Version 1.1.11**
1.1.11:
    - Support translatable_fields And translatable_attributes relationships In Shop Managers Version 2

**Update Nano.ShopApi Version 1.1.30**
1.1.30:
    - Support translatable_fields And translatable_attributes relationships In Shop Products API Version 2
    - Support translatable_fields And translatable_attributes relationships In Shop Managers API Version 2
    - Update shop/products Docs Api Version 2.
    - Update shop/managers Docs Api Version 2.

#### 4. إعداد توثيق شامل  
- تم إعداد ملف توثيق متكامل (`Docs-TranslatableContentCaching-en.md`) يشرح بالتفصيل كل دالة، مع أمثلة عملية وتوضيح لتنسيقات الإخراج المختلفة.  
- التوثيق متاح باللغتين العربية والإنجليزية لضمان وصوله لجميع أعضاء الفريق والعملاء.  


### الفوائد المحققة  

- **سرعة أداء فائقة:** بفضل التخزين المؤقت الذكي، أصبحت استجابة الـ API للبيانات المترجمة أسرع بكثير، خاصة في التطبيقات ذات المحتوى الكبير.  
- **مرونة غير مسبوقة:** يمكن للمطورين والعملاء طلب البيانات المترجمة بأي شكل يناسبهم (كائن، مصفوفة، تجميع حسب اللغة، إلخ) دون حاجة لتعديل الخلفية.  
- **توفير وقت التطوير:** الدوال المساعدة الجديدة تقلل الحاجة إلى كتابة كود مخصص لكل حالة استخدام.  
- **تجربة مستخدم محسنة:** يمكن للمستخدمين النهائيين رؤية المحتوى بلغات متعددة بسلاسة، مع دعم كامل للروابط البديلة (alternate locales) مما يعزز الـ SEO.  
- **سهولة الصيانة:** الكود منظم ومقسم إلى سلوكيات مستقلة، مما يسهل تحديثه أو إضافة ميزات جديدة مستقبلاً.  

### الخطوات القادمة  

- **مراقبة الأداء:** سيتم متابعة أداء النظام بعد التحديث وجمع بيانات حول زمن الاستجابة وعدد استعلامات الكاش.  
- **التوسع في التطبيق:** سيتم دراسة إمكانية تطبيق نفس السلوكيات على نماذج أخرى مثل المقالات والصفحات.  
- **إضافة واجهة رسومية:** في المرحلة القادمة يمكن توفير لوحة تحكم لإدارة إعدادات الترجمة والكاش بشكل مرئي.  


See [docs/Docs-TranslatableContentCaching-ar.md](./docs/Docs-TranslatableContentCaching-ar.md)
