#Update 2025-1 

**تحديثات شهر واحد **

## 2025-01-01
**Nano Messenger**

إطلاق تحديثات متنوعة في جزء الشات والمراسلات وتحسين الـ API الخاص بها لتسهيل التعامل معه. تم إضافة توثيق مختصر إلى جانب التوثيق الكامل يوضح كيفية التعامل مع الشات، وكيفية إرسال الرسائل، وطريقة جلب المحادثات وغيرها. 

يرجى مشاهدة الفيديوهات لفهم الاستخدام.

**يمكن تصفح التوثيق الكامل للـ API الخاص بالمراسلات من خلال الرابط التالي:**

```plaintext
GET /messenger-api-explorer
```

**ملاحظة:** يوجد API متكامل للمراسلات ولتوفير الوقت على المبرمجين قمنا بعمل API مختصر للتعامل مع نظام المراسلات كالتالي:

```plaintext
# لمعرفة بيانات مزود المراسلة للمستخدم الحالي 
GET /api/v1/messenger/data

# لجلب محادثات المستخدم الحالي 
GET /api/v1/messenger/theards

# لجلب رسائل محادثة معينة 
GET /api/v1/messenger/messages/page/{thread}

# لإرسال رسالة معينة 
POST /api/v1/messenger/messages/send

# لتصفح وقراءة رسالة معينة
GET /api/v1/messenger/messages/page/{thread}/{message}
```

---

## 2025-01-02
**Support User Fields in Manage Products Backend**

تحديث في واجهات إضافة الأصناف بلوحة التحكم حيث أصبح بالإمكان إضافة إعلانات أو أصناف لمتاجر أو مستخدمين آخرين بحيث يمكن تحديد مالك الصنف عند الإضافة ولا يسمح بتغيير مالك الصنف. لتفعيل هذه الخاصية يجب أن يكون المتغير التالي في الإعدادات يحمل القيمة `true`:

```plaintext
# تفعيل حقول تحديد المستخدم في لوحة التحكم أي مالك الإعلان 
NANO_SHOP_ALLOW_USER_FIELDS = true
```

يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-02
**تحديث في جزء أزرار التواصل مع مالك الإعلان**

حيث قمنا بتحديث الكود للتعامل مع الإعلانات التي أصحابها لا يرغبون بعرض رقم هاتفهم ولا زر التواصل عبر WhatsApp. بحيث أصبح النظام يفحص هذه الخصائص. في حالة كانت جميع وسائل التواصل موقفة في الإعلان، يقوم النظام تلقائيًا بتفعيل زر المراسلة عبر WhatsApp ولكن برقم المنصة وليس صاحب الإعلان. للتوضيح يمكن مشاهدة الفيديو.

لإيقاف هذه الخصائص أو تفعيلها وتحديد رقم التواصل، يمكن ذلك من خلال الإعدادات التالية، علماً أن هذه هي القيم الافتراضية:

```plaintext
# فحص حالة كان الشخص موقف زر الاتصال وزر WhatsApp، قم بوضع رقم المنصة في WhatsApp  
NANO_SHOPAPI_IS_CHECK_IS_SHOW_MOBILE = true

# الرقم الافتراضي الذي سيتم التواصل معه في حال كان العميل موقف أزرار التواصل 
NANO_SHOPAPI_DEFAULT_SHOP_MOBILE = '+967780505100'
```

---

## 2025-01-03
**Support `sitemap.xml`**

تحديثات في الوحدة البرمجية الخاصة بتوليد خرائط الموقع لتحسين ظهور الموقع على محركات البحث ولتسريع عملية أرشفة الموقع في محركات البحث. حيث أصبح بالإمكان توليد خرائط الموقع للأصناف بشكل ديناميكي ولأي صفحات خارجية في حال كان جزء الفرونت اند منفصل عن الباك اند أو في دومين مختلف. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-04
**Support Extend User Columns Products Counts**

تحديثات في جزء إدارة المستخدمين حيث تم حقن واجهات إدارة المستخدمين بحقول خاصة بعرض عدد أصناف أو إعلانات كل مستخدم وعدد الأصناف المتاحة والمكتملة وذلك لتسهيل مراجعة إعلانات وأصناف كل مستخدم. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-05 - 2025-01-06
**Support Same Store Products List And Same Products List API Version 2**

تم إضافة API خاص بجلب أصناف متجر أو مستخدم معين وذلك من خلال تمرير رقم المتجر أو نوع المستخدم ورقم المستخدم أو من خلال تمرير رقم صنف معين في المتجر. وتم إضافة API خاص بجلب كافة الأصناف المشابهة لصنف معين من خلال تمرير رقم الصنف بحيث يقوم النظام بجلب الأصناف المشابهة له بالاعتماد على خصائص وتصنيفات الصنف الممرر.

**API:**

```plaintext
/api/v1/shop/samestore
/api/v1/shop/sameproducts/{id?}
```

---

## 2025-01-07 - 2025-01-08
**Support Tags, Categories, Menus, Channels in List Products**

تحديثات في واجهة إدارة الأصناف حيث تم إضافة عرض تصنيفات وهاشتجات وقوائم وقنوات الصنف إلى القائمة بدلاً من الدخول على الصنف لمعرفة هذه الخصائص، وذلك بغرض تسهيل عملية تصفح الأصناف. هذه الحقول يتم حقنها من الأجزاء البرمجية التابعة لها بحيث لا يتم التأثير على الواجهات المستهدفة في حال كانت هذه الوحدات غير مثبتة. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-09
**Support Log Search Query In Products API Version 2**

تفعيل خاصية تسجيل طلبات البحث في جزء الأصناف بحيث يتم حفظ المواضيع التي يبحث عنها المستخدمون في سجل طلبات البحث. لتفعيل هذه الخاصية يجب أن يكون سجل تسجيل طلبات البحث مفعلاً ويجب أن تكون المتغيرات التالية مفعلة في الإعدادات:

```plaintext
# السماح بخاصية تسجيل طلبات البحث في سجل البحث
NANO_SHOPAPI_PRODUCTS_IS_SUPPORT_LOG_SEARCH_QUERY = false

# تسجيل طلبات البحث عن الأصناف في سجل البحث 
NANO_SHOPAPI_PRODUCTS_IS_LOG_SEARCH_QUERY = false
```

للتوضيح يمكن مشاهدة الفيديو.

---

## 2025-01-10 إلى 2025-01-12
**Support Search Weights In Products API Version 2**

تم برمجة آلية للتعامل مع طريقة عرض نتائج البحث وذلك عن طريق عمل وزن لكل حقل، مثلاً حقل الاسم له الوزن 3 وحقل الوصف له الوزن 2 وحقل تفاصيل الصنف له الوزن 1. في حال وجدت كلمة البحث في الاسم، سيتم وضع الوزن الخاص بحقل الاسم وهكذا. وبالاعتماد على مجموع الأوزان التي حصل عليها الصنف تكون له الأولوية بالظهور. لتوضيح الفكرة والمشكلة التي تعالجها هذه الآلية يرجى مشاهدة الفيديو.

لتفعيل هذه الآلية يجب أن تكون المتغيرات التالية مفعلة في الإعدادات علماً أن القيمة الافتراضية لها `false`:

```plaintext
# هل يسمح بتفعيل خاصية ترتيب الأصناف عند البحث حسب الأوزان
NANO_SHOPAPI_PRODUCTS_IS_SUPPORT_SEARCH_WEIGHTS = false

# القيمة الافتراضية لتطبيق البحث حسب الأوزان
NANO_SHOPAPI_PRODUCTS_IS_SEARCH_WEIGHTS = false

# القيمة الافتراضية لترتيب الأوزان
NANO_SHOPAPI_PRODUCTS_SEARCH_WEIGHTS_DIRECTION = 'desc'

# إظهار حقل الوزن في الاستعلام 
NANO_SHOPAPI_PRODUCTS_IS_ADD_COLUMN_SEARCH_WEIGHT = false
```

---

## 2025-01-12
**تحديثات في المدونة**

حيث تم إصلاح صفحة التواصل ونموذج التواصل وخاصية إرسال رسالة تلقائية عبر البريد للشخص الذي طلب التواصل عبر البريد وتم إضافة زر التواصل معنا عبر WhatsApp في البريد وفي واجهات الموقع وتم إصلاح مشاكل أخرى في بعض الصفحات.

---

## 2025-01-12
**حل مشاكل الوظائف المجدولة الخاصة بحذف ملفات تصدير البيانات القديمة بشكل تلقائي كل فترة.**

---

## 2025-01-13
**Support Report Statistics In Proposals And Reports And Complaints**

تحديثات في جزء الشكاوي والمقترحات والبلاغات حيث تم إضافة تقارير إحصائية ورسومية وزمنية خاصة بالمقترحات والبلاغات والشكاوي بشكل عام أو على مستوى المستخدمين أو المتاجر أو الأصناف. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-01-14
**Support Filter User Type And User Id And Target Type In Proposals**

تحديثات في جزء المقترحات والشكاوي والبلاغات حيث تم إضافة فلاتر خاصة بفلترة السجلات حسب نوع الكائن أو رقمه أو حسب نوع المستخدم أو رقم المستخدم إلى الواجهة لتسهيل مراجعة وفلترة البلاغات والمقترحات وتم تحسين الواجهات وإصلاح بعض المشاكل الغير ظاهرة. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-15 - 2025-01-17
**Support Advanced Search Query In Products API**

البحث المتقدم في الأصناف يعتمد على استخدام خوارزمية لمطابقة كلمة البحث المدخلة مع اسم الصنف، بحيث تقوم هذه الخوارزمية بحذف حروف العلة والهمز وإعادة كتابة الكلمة بعدة طرق والبحث عنها، وذلك يحل مشكلة الكتابة باللغة العربية.

لتفعيل هذه الآلية يجب أن تكون المتغيرات التالية مفعلة في الإعدادات علماً أن القيمة الافتراضية لها `false`:

```plaintext
# هل يسمح بتفعيل البحث المتقدم في الأصناف بجزء الـ API
NANO_SHOPAPI_PRODUCTS_IS_SUPPORT_ADVANCED_SEARCH = false

# القيمة الافتراضية لتطبيق البحث المتقدم في حال كان مسموح
NANO_SHOPAPI_PRODUCTS_IS_ADVANCED_SEARCH = true

# مود البحث المتقدم `OR` أو `AND`
NANO_SHOPAPI_PRODUCTS_ADVANCED_SEARCH_MOD = 'OR'
```

---

## 2025-01-18 - 2025-01-19
**Support Filter Advanced Search in Products to Backend**

تم إضافة فلاتر للبحث المتقدم حسب الاسم أو الوصف أو الوصف المختصر في واجهات إدارة الأصناف وذلك بغرض تسهيل عملية البحث عن الأصناف والإعلانات.

**البحث المتقدم في الأصناف يعتمد على استخدام خوارزمية لمطابقة كلمة البحث المدخلة مع اسم الصنف أو الوصف، بحيث تقوم هذه الخوارزمية بحذف حروف العلة والهمز وإعادة كتابة الكلمة بعدة طرق والبحث عنها، وذلك يحل مشكلة الكتابة باللغة العربية.**

لتفعيل هذه الفلاتر في واجهة إدارة الأصناف يجب أن تكون المتغيرات التالية مفعلة في الإعدادات علماً أن القيمة الافتراضية لها `false`:

```plaintext
# إظهار فلاتر البحث المتقدم حسب الاسم والوصف في واجهة إدارة الأصناف 
NANO_SHOP_ALLOW_FILTER_ADVANCED_SEARCH = true
```

---

## 2025-01-20 - 2025-01-23
**Support Stories API**

تم اكتمال الـ API الخاص بالوحدة البرمجية الخاصة بالقصص حيث تم اختباره وتجربته وعمل التوثيق الخاص به مع عدة أمثلة. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-24 - 2025-01-25
**Support Extend Set Unpublished Products to User Trashed**

تحديثات خاصة بمعالجة المشاكل الناتجة عن حذف المستخدم لحسابه. حيث تم إضافة أحداث متعلقة بحذف الحساب يمكن الاستماع إليها من أي وحدة برمجية أخرى وتطبيق أي تأثيرات تترتب عن حذف الحساب كا تغيير حالة الأصناف إلى غير منشور للشخص الذي قام بحذف حسابه وغيرها. وتم إضافة فلاتر إلى واجهة إدارة الأصناف لمعرفة الأصناف أو الإعلانات التي قام أصحابها بحذف حساباتهم وغيرها.

---

## 2025-01-26 - 2025-01-27
**Support Visitors In Stories API**

تم إضافة API خاص بجميع الأشخاص الذين قاموا بمشاهدة قصة معينة بحيث يتم إرجاع سجلات المشاهدة للقصة مع بيانات المستخدمين أو الأشخاص الذين شاهدوها. صلاحية هذا الجزء مقتصرة على مالك القصة فقط. وتم كتابة التوثيق الخاص بهذا الجزء مع الأمثلة والشرح. يرجى مشاهدة الفيديو للتوضيح.

---

## 2025-01-28
**حل مشكلة تعارض نموذج أوقات العمل مع حقول التواصل في واجهة تعديل المتاجر**

حل مشكلة تعارض نموذج أوقات العمل مع حقول التواصل في واجهة تعديل المتاجر. يمكن مشاهدة الفيديو للتوضيح.

---

## 2025-01-29 - 2025-01-31
**Pass All Data from the Event Causing the Notification**

تحديثات في جزء الإشعارات حيث أصبح يتم تمرير جميع البيانات الراجعة من الحدث المسبب للإشعار كبيانات الطلب مثلاً في جزء `data` ضمن الإشعار. يمكن مشاهدة الفيديو للتوضيح.
