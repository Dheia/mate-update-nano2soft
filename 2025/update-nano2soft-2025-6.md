#Update 2025-6

**تحديثات شهر ستة **

## 2025-06-01 - 2025-06-03
**Add Booking Columns to `nano_orders_types` table and `nano_orders_orders` table**

تم إضافة الحقول اللازمة للتعامل مع حجوزات الطيران وحجوزات الفنادق والرحلات البرية. وتم إضافة إعدادات ضمن نوع الطلب للتحكم بهذه الحقول وتم عمل الواجهات الخاصة بهذه الإضافات وتم دعمها في الـ API الخاص بأنواع الطلبات وببيانات الطلب وفي خطوات استكمال الطلب.

لتفعيل إظهار حقول الحجوزات في واجهات الباك اند يلزم تفعيل الخيار التالي في الإعدادات:

```plaintext
NANO_ORDERS_IS_SUPPORT_BOOKING = true
```

يمكن مشاهدة الصور والفيديو للتوضيح.

---

## 2025-06-03 - 2025-06-06
**Update Send Code Activation And Check Activation in API Version 2**

تم تحديث الجزء الخاص بإرسال كود التحقق وتنشيط الحسابات حيث أصبح يدعم كافة العمليات من تنشيط حساب أو استعادة حساب أو تغيير البريد أو تغيير رقم الهاتف أو التسجيل بخطوة عن طريق كود عبر رقم الجوال أو عن طريق كود عبر البريد. وتم كتابة التوثيق بشكل كامل مع عدة أمثلة لكل حالة وتم تحديث جزء تسجيل الدخول وإنشاء حساب بالتوافق مع هذه التحديثات.

يرجى مشاهدة الفيديوهات والاطلاع على التوثيق لمعرفة طريقة الاستخدام.

---

## 2025-06-07 - 2025-06-08
**Support Auth Verify Your Identity in API Version 2**

تم اعتماد API خاص بالتحقق من هوية الحساب يشمل كافة العمليات المذكورة في التحديث السابق مع اختلافات بسيطة حيث يستخدم هذا الجزء الإصدار الثاني فقط ولا يدعم الإصدار الأول وسيتم اعتماده بشكل رسمي حيث سيتم حذف الطرق القديمة للتحقق بالمستقبل القريب. وتم إعادة كتابة التوثيق الخاص بهذا الجزء بشكل احترافي.

```plaintext
POST api/v1/auth/verify/send
```

```plaintext
POST api/v1/auth/verify/check
```

**الطرق السابقة التي سيتم حذفها مستقبلاً هي كالتالي:**

```plaintext
POST api/v1/auth/activation
POST api/v1/auth/sendactivation
POST api/v1/auth/checkactivation
POST api/v1/auth/activation/{user_id}/{code}
```

### الوصف
تقدم هذه الدالة (API) خدمة التحقق من الهوية، حيث يمكن استخدامها للتحقق من رقم الهاتف أو البريد الإلكتروني. كما تدعم تنشيط الحساب، استعادة الحساب، تغيير كلمة المرور، تغيير البريد الإلكتروني، وتغيير رقم الهاتف، والتسجيل بخطوة واحدة عن طريق إرسال كود تحقق إلى رقم الهاتف أو البريد الإلكتروني.

### النقاط الرئيسية

1. **التحقق من الهوية**
   - يتم استخدام هذه الدالة للتحقق من صحة المعلومات المقدمة (مثل رقم الهاتف أو البريد الإلكتروني).
   - يتم إرسال رمز تحقق (OTP) إلى المستخدم عبر الوسيلة المحددة.

2. **الوظائف المدعومة**
   - **تنشيط الحساب:** 
     - يمكن للمستخدم تفعيل حسابه الجديد باستخدام رمز التحقق المرسل.
   - **استعادة الحساب:**
     - يمكن للمستخدم استعادة الوصول إلى حسابه عبر التحقق باستخدام المعلومات المسجلة.
   - **تغيير كلمة المرور:**
     - يمكن للمستخدم تغيير كلمة المرور الخاصة به بعد التحقق من هويته.
   - **تغيير البريد الإلكتروني:**
     - يمكن للمستخدم تحديث عنوان بريده الإلكتروني بعد التحقق.
   - **تغيير رقم الهاتف:**
     - يمكن للمستخدم تعديل رقم هاتفه المحمول بعد التأكد من هويته.
   - **التسجيل بخطوة واحدة:**
     - يمكن للمستخدم التسجيل باستخدام رقم الهاتف أو البريد الإلكتروني دون الحاجة لخطوات إضافية.

---

## 2025-06-09 - 2025-06-13
**Support Airports And Flights in Backend**

تم إضافة الجزء الخاص بإدارة الرحلات والمطارات أو محطات النقل في نظام الحجوزات وتم إضافة الواجهات الخاصة بذلك إلى لوحة التحكم. وتم تجهيز آلية مناسبة لإدارة الرحلات في النظام بشكل أسهل. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-06-14
**Support LocationModel And Config airports and flights**

تم تحديث واجهات الرحلات والمطارات وتم عمل إعدادات لكل منها بحيث يمكن التحكم بخصائصها وحقول بياناتها كالدولة والمدينة والمنطقة وغيرها. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-06-15 - 2025-06-16
**Support Airports And Flights in API Version 2**

تم إضافة الـ API الخاص بالرحلات والمطارات بشكل احترافي بحيث يمكن فلترة البيانات بعدة طرق وحسب الدولة أو المدينة أو المنطقة أو حسب مكان الانطلاق ومكان الوجهة. وتم عمل التوثيق الخاص بها مع عدة أمثلة لكافة الحالات. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-06-17 - 2025-06-18
**Update OrderManager And OrderRequestManager**

تم تحديث جزء إدارة الطلبات وإدارة عروض التوصيل في الطلبات حيث تم عمل حلول لتطبيق الكاشير في المطاعم وهذه الحلول هي كالتالي:

1. إضافة خاصية التحكم بعرض الطلبات على الموصلين، بحيث يمكن للمطعم عدم عرض الطلبات الجديدة مباشرة على الموصلين ولا تظهر للموصلين حتى يتم التحقق منها واعتمادها من قبل الكاشير.
2. إضافة خاصية جمع كافة خطوات تقديم عروض التوصيل بخطوة واحدة بحيث يتم إسناد الطلب للموصل واعتماده دون انتظار موافقة العميل وتأكيد السائق على قبول الطلب. وذلك من أجل تطبيق الكاشير في المطاعم.
3. عند إسناد الطلب لموصل من تطبيق الكاشير للمطاعم يتم اعتماد آلية تقديم العروض وتأكيدها كما في خطوات تطبيق التوصيل حيث يقوم النظام بتقديم عرض للموصل واعتماد الموصل مباشرة في حال كانت الخاصية السابقة مفعلة.

تم عمل إعدادات لهذه الخصائص وهي غير مفعلة افتراضياً. هذه الإعدادات هي كالتالي:

```plaintext
# عند تقديم عرض بتوصيل الطلب هل يتم اعتماد الطلب مباشرة للسائق دون انتظار موافقة العميل
# تستخدم هذه الخاصية في تطبيقات المطاعم 
NANO_ORDERS_ALLOW_4_STEP_ON_ONE = false

# عند تعديل بيانات الطلب من قبل تطبيق الإدارة هل يقوم النظام بتقديم عرض للموصل 
# بحيث يلتزم النظام بآلية تقديم العروض كما في تطبيقات التوصيل 
# تستخدم هذه الخاصية في تطبيقات المطاعم
# يمكن أن تحمل هذه الخاصية الخطوة المطلوبة تنفيذها هل تقديم عرض فقط  add
# أم تقديم العرض واعتماد الطلب addDirct وذلك إذا أردنا تجاوز الخاصية السابقة 
# لا تعمل هذه الخاصية عند تعديل الطلب من لوحة التحكم 
# false,true,add,addDirct
NANO_ORDERS_ALLOW_ADD_STEP_REQUESTS_ON_EDIT_ORDERS = false

# هل يتم عرض الطلبات الجديدة على الموصلين مباشرة أم يتم عرض الطلبات التي قيد المعالجة والتجهيز 
# بحيث يلزم أن تقوم الإدارة بتغيير حالة الطلب إلى قيد المعالجة حتى تظهر للموصلين
# لمنع ظهور الطلبات الجديدة مباشرة يتم تفعيل هذا الخيار 
# تستخدم هذه الخاصية في تطبيقات المطاعم 
NANO_ORDERS_IS_NOT_DELIVERY_PROCESSING = false
```

---

## 2025-06-19 - 2025-06-20
**Update Sms Templates**

تحديثات متنوعة وحل مشاكل في جزء قوالب الرسائل النصية وتم تحسين الكود بشكل كبير. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-06-21 - 2025-06-23
**Support Button Create Incomplete Lang Files**

تم إضافة آلية لإنشاء ملفات الترجمة لأي لغة بحيث يمكن استيراد ملفات الترجمة للغة عند إنشائها من خلال ملفات اللغة الافتراضية بضغطة زر بدلاً من نسخ كل ملف على حدة وذلك لتسهيل عملية ترجمة النظام إلى عدة لغات. يمكن مشاهدة الفيديو والصور للتوضيح.

---

## 2025-06-24 - 2025-06-28
**Support Code Callable In ShippingMethods**

تحديثات في جزء طرق الشحن تم تفعيل آلية تنفيذ سكريبت معين ضمن طريقة الشحن بحيث يمكن التحكم بالكود ضمن السكريبت وتنفيذه أثناء احتساب سعر التوصيل مع مراعاة الحماية والأمن والتحقق من عدم احتواء الكود على دوال ضارة حيث تم برمجة كلاس مستقل خاص بتنفيذ الكود والتحقق من صحة الكود ومن خلو الكود من أي دوال ضارة.

لتفعيل استخدام الشروط المتقدمة ضمن طرق الشحن يجب أن يكون الإعداد التالي مفعلاً علماً أن القيمة الافتراضية هي غير مفعلة:

```plaintext
# السماح بخاصية الشروط المتقدمة في طرق الشحن 
NANO_ORDERS_ALLOW_CALLABLE_SHIPPING = false
```

---

## 2025-06-29 - 2025-06-30
**Support Custom Fields Department To Backend And API Version 2**

تم دعم الحقول المخصصة بالنسبة للمتاجر والفروع بحيث أصبح بالإمكان إضافة حقول مخصصة حسب الحاجة إلى المتاجر والفروع. حيث تم عمل الواجهات الخاصة بجزء الباكند وتم عمل الـ API الخاص بها مع التوثيق. يمكن الاطلاع على الـ API الخاص بالحقول المخصصة للمتاجر والفروع من خلال الرابط التالي:

```plaintext
api/v1/basic/fields
```

يمكن مشاهدة الفيديو والصور للتوضيح.